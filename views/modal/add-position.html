<div id="positionModal" class="modal" style="display: block">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Add Position</h3>
      <button
        class="close-btn"
        hx-get="/modal/close"
        hx-target="#modal-container"
        hx-swap="innerHTML"
      >
        &times;
      </button>
    </div>
    <form
      id="positionForm"
      class="modal-form"
      hx-post="/api/positions/add"
      hx-target="#modal-container"
      hx-swap="innerHTML"
    >
      <div class="form-group">
        <label>Position Type</label>
        <select
          id="positionType"
          name="positionType"
          required
          hx-get="/modal/add-position-fields.html"
          hx-target="#conditional-fields"
          hx-swap="innerHTML"
          hx-trigger="change"
        >
          <option value="stock">Stock</option>
          <option value="option">Option</option>
        </select>
      </div>

      <div class="form-group">
        <label>Ticker</label>
        <input
          type="text"
          id="ticker"
          name="ticker"
          required
          placeholder="e.g., AAPL"
        />
      </div>

      <div class="form-group">
        <label>Quantity</label>
        <input
          type="number"
          id="quantity"
          name="quantity"
          required
          step="0.01"
          placeholder="100"
        />
      </div>

      <div class="form-group">
        <label>Cost Basis / Price</label>
        <input
          type="number"
          id="costBasis"
          name="costBasis"
          required
          step="0.01"
          placeholder="150.00"
        />
      </div>

      <div class="form-group">
        <label>Open Date</label>
        <input type="date" id="openDate" name="openDate" required />
      </div>

      <div id="conditional-fields">
        <!-- Stock or Option specific fields loaded here -->
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Add Position</button>
        <button
          type="button"
          class="btn btn-secondary"
          hx-get="/modal/close"
          hx-target="#modal-container"
          hx-swap="innerHTML"
        >
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
